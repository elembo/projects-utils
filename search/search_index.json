{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"LAB Tools","text":""},{"location":"#cml","title":"CML","text":""},{"location":"#ubuntu","title":"Ubuntu","text":""},{"location":"#bootstrap-configuration","title":"Bootstrap Configuration","text":"<pre><code># this is a shell script which will be sourced at boot\nhostname Server-01\n# configurable user account\nUSERNAME=cisco\nPASSWORD=cisco\n# no password for tc user by default\nTC_PASSWORD=\n#-------------------------------------------------------------------\n# Assign IP Address to Interfaces\n#-------------------------------------------------------------------\n#\nip addr add [ip_adress/mask] brd [ip_address_broadcast] dev ens2\n#\n#\n#-------------------------------------------------------------------\n# Bring the Interfaces UP\n#-------------------------------------------------------------------\n#\nip link set dev ens2 up\n#\n#\n#-------------------------------------------------------------------\n# Create the proxy.sh File to use proxy settings\n#-------------------------------------------------------------------\n#\ntee -a /etc/profile.d/proxy.sh &lt;&lt;EOF\n#-------------------------------------------------------------------\n# Set Proxy Config via profie.d\n#-------------------------------------------------------------------\n#\nexport http_proxy=\"http://calo-rtp-proxy.cisco.com:3128/\"\nexport https_proxy=\"http://calo-rtp-proxy.cisco.com:3128/\"\nexport ftp_proxy=\"http://calo-rtp-proxy.cisco.com:3128/\"\nexport no_proxy=\"localhost,127.0.0.1,::1,*.cisco.com,.cisco.com,cisco.com\"\n#\n# For curl\n#\nexport HTTP_PROXY=\"http://calo-rtp-proxy.cisco.com:3128/\"\nexport HTTPS_PROXY=\"http://calo-rtp-proxy.cisco.com:3128/\"\nexport FTP_PROXY=\"http://calo-rtp-proxy.cisco.com:3128/\"\nexport NO_PROXY=\"localhost,127.0.0.1,::1,*.cisco.com,.cisco.com,cisco.com\"\nEOF\n#\n#-------------------------------------------------------------------\n# Make proxy.sh executable\n#-------------------------------------------------------------------\n#\nsudo chmod +x  /etc/profile.d/proxy.sh\n#\n#-------------------------------------------------------------------\n# Create the proxy.conf File to use proxy in APT\n#-------------------------------------------------------------------\n#\ntee -a /etc/apt/apt.conf.d/proxy.conf &lt;&lt;EOF\n#-------------------------------------------------------------------\n# Set Proxy Config for APT\n#-------------------------------------------------------------------\n#\n#\nAcquire::http::proxy \"http://calo-rtp-proxy.cisco.com:3128/\";\nAcquire::https::proxy \"http://calo-rtp-proxy.cisco.com:3128/\";\nAcquire::ftp::proxy \"http://calo-rtp-proxy.cisco.com:3128\";\nEOF\n</code></pre>"},{"location":"#proxy-for-wget","title":"Proxy for WGET","text":"<pre><code>vim ~/.wgetrc\n\n use_proxy = on\n http_proxy = http://calo-rtp-proxy.cisco.com:3128/ \n https_proxy = http://calo-rtp-proxy.cisco.com:3128/ \n ftp_proxy = http://calo-rtp-proxy.cisco.com:3128/\n</code></pre>"},{"location":"#tacacs-w-docker","title":"Tacacs+ w/ Docker","text":""},{"location":"#step-1","title":"Step 1","text":"<pre><code>git clone https://github.com/llima3000/tacplus_image\n\ncd tacplus_image\n\nsudo docker build --build-arg http_proxy=http://calo-rtp-proxy.cisco.com:3128 --build-arg https_proxy=http://calo-rtp-proxy.cisco.com:3128 --no-cache -t tacplus .\n</code></pre>"},{"location":"#step-2","title":"Step 2","text":"<pre><code>sudo docker run -td --name tacplus -p 49:49 -v /home/cisco/tacplus_image/tac_plus.conf:/etc/tacacs+/tac_plus.conf tacplus\n</code></pre>"},{"location":"sd-wan/","title":"Cisco SD-WAN","text":""},{"location":"sd-wan/#initial-config","title":"Initial Config","text":""},{"location":"sd-wan/#boostrap","title":"Boostrap","text":"<pre><code>system\n system-ip             1.1.1.4\n overlay-id            1\n site-id               [site_id]\n port-offset           0\n control-session-pps   300\n admin-tech-on-failure\n sp-organization-name  \"[org_name]\"\n organization-name     \"[org_name]\"\n port-hop\n track-transport\n track-default-gateway\n console-baud-rate     9600\n no on-demand enable\n on-demand idle-timeout 10\n vbond [vbond_fqdn] port 12346\n\nip host [vbond_fqdn] [vbond_ip_addredd]\n\ninterface Tunnel[if_index_interface]\n no shutdown\n ip unnumbered [intf_a/b/c]\n no ip redirects\n tunnel source [intf_a/b/c]\n tunnel mode sdwan\n\nsdwan\n interface [intf_a/b/c]\n  tunnel-interface\n   encapsulation ipsec weight 1\n   no border\n   color [sdwan_color] restrict\n</code></pre>"},{"location":"sd-wan/#add-virtual-router","title":"Add Virtual Router","text":"<pre><code> request platform software sdwan vedge_cloud activate chassis-number [chassis_id] token [token]\n</code></pre>"},{"location":"sd-wan/#verify-commands","title":"Verify Commands","text":""},{"location":"sd-wan/#qos","title":"QoS","text":"<pre><code>!-------------------------------------------------------------------\n! QoS Verify Commands\n!-------------------------------------------------------------------\n!\nshow sdwan policy access-list-associations\nshow sdwan policy access-list-counters\nshow sdwan policy access-list-names\nshow sdwan policy access-list-policers\nshow sdwan policy data-policy-filter\nshow sdwan policy rewrite-associations\nshow policy-map interface GigabitEthernet0/0/2 out | inc Clas|packet\n!\n!\n!-------------------------------------------------------------------\n! Per Tunnel QoS Verify Commands\n!-------------------------------------------------------------------\n!\nshow platform software sdwan qos template\nshow platform software sdwan qos policy\nshow platform software sdwan qos target\nshow policy-map interface GigabitEthernet 0/0/1\n!\n</code></pre>"},{"location":"sd-wan/#zbf","title":"ZBF","text":"<pre><code> show sdwan zbfw zonepair-statistics\n show platform hardware qfp active feature firewall zonepair 1\n show platform software firewall fp active pairs\n show platform software firewall fp active vpn-bindings\n show platform software firewall fp active zones\n show platform hardware qfp active feature firewall datapath zonepair 1 1\n\n show platform hardware qfp active feature firewall memory\n show object-group\n show sdwan zonebfwdp sessions\n show sdwan zbfw drop-statistics\n\n show platform software firewall fp active sessions zone-pair ZONE_PAIR_NAME\n show platform software firewall fp active statistics\n\n show platform software object-manager fp active pending-issue-update\n show platform software object-manager fp active error-object\n show platform software object-manager fp active pending-ackupdate\n show platform software object-manager fp active statistics\n\n show platform hardware qfp active feature firewall zonepair 1\n show plat hard qfp act cl fe cl tcam cce 10913312 zone-pair 1 brief\n\n show platform  hardware qfp active classification class-group-manager class-group client cce all\n show platform  hardware qfp active classification class-group-manager class-group client cce name RULE NAME\n show platform  hardware qfp active classification feature-manager statistics\n\n show platform software access-list F0 summary\n show platform hardware qfp active feature acl control\n\n show platform hardware qfp active feature sdwan datapath cloudexpress stats\n</code></pre>"},{"location":"sd-wan/#troubleshooting","title":"Troubleshooting","text":""},{"location":"sd-wan/#change-management-mode","title":"Change Management Mode","text":"<pre><code>unhide viptela_internal\n!\nno system is-vmanaged\n</code></pre>"},{"location":"sd-wan/#fix-c8300-tengig-port","title":"Fix C8300 TenGig Port","text":"<pre><code>!-------------------------------------------------------------------\n! Request Token for System Shell\n!-------------------------------------------------------------------\n!\nrequest consent-token generate-challenge shell-access auth-timeout 120\n!\n!\n!-------------------------------------------------------------------\n! Provide Token for System Shell\n!-------------------------------------------------------------------\n!\nrequest consent-token accept-response shell-access [token]\n!\n!\n!-------------------------------------------------------------------\n! Request Access for System Shell\n!-------------------------------------------------------------------\n!\nrequest platform software system shell\n!\n!\n!-------------------------------------------------------------------\n! This will move us to the normal router prompt\n!-------------------------------------------------------------------\n!\nconfd_cli -P 3010 -C -noaaa -g sdwan-oper\n!\n!\n!-------------------------------------------------------------------\n! Disable CDB\n!-------------------------------------------------------------------\n!\ncdb-maintenance recovery-method ios-processing-disabled\n!\n!\n!-------------------------------------------------------------------\n! Then Apply the Config Below\n!-------------------------------------------------------------------\n!\nconfig\n!\ninterface TenGigabitEthernet0/0/4\n no negotiation\n!\ninterface TenGigabitEthernet0/0/5\n no negotiation\n! \ncommit\n!\nend\n!\n!\n!-------------------------------------------------------------------\n! Get Back to the Router Prompt\n!-------------------------------------------------------------------\n!\nconfd_cli -P 3010 -C -noaaa -g sdwan-oper\n!\n!\n!-------------------------------------------------------------------\n! Enable CDB\n!-------------------------------------------------------------------\n! \ncdb-maintenance recovery-method normal-operation\n</code></pre>"},{"location":"sd-wan/#transfer-files-between-vmanage-and-cedge","title":"Transfer Files Between vManage and cEdge","text":"<pre><code>!-------------------------------------------------------------------\n! Transfer from cEdge to vManage\n!-------------------------------------------------------------------\n!\nrequest execute vpn 0 scp -P 830 admin@[system_ip]:/bootflash/ciscosdwan.txt /home/admin\n!\n!\n!-------------------------------------------------------------------\n! Transfer from vManage to cEdge\n!-------------------------------------------------------------------\n!\nrequest execute vpn 0 scp -P 830 /home/admin/ciscosdwan.txt admin@[system_ip]/bootflash/vmanage-admin\n</code></pre>"},{"location":"sd-wan/#check-mtu","title":"Check MTU","text":"<pre><code>!-------------------------------------------------------------------\n! MTU Commands\n!-------------------------------------------------------------------\n!\nshow platform software sdwan R0 next-hop overlay all\nshow platform hardware qfp active feature sdwan datapath session summary\n!\n</code></pre>"},{"location":"sd-wan/#debugs","title":"Debugs","text":"<pre><code>!-------------------------------------------------------------------\n! Debug Packets Commands\n!-------------------------------------------------------------------\n!\ndebug platform packet-trace packet 2048 circular fia-trace data-size 2048\ndebug platform packet-trace copy packet both size 2048 L3\ndebug platform condition ipv4 10.189.4.105/32 in\ndebug plat cond start\n!\ndebug plat cond stop\n!\nshow platform packet-trace summary\n!\ndebug platform packet-trace drop code 187\ndebug platform packet-trace packet 16\ndebug platform condition ipv4 both\ndebug plat cond start\n!\n</code></pre>"}]}